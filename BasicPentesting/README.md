# Project: Basic Pentesting (TryHackMe)

**Date:** December 2025
**Target:** 10.65.138.134
**Tools Used:** Nmap, Gobuster, Enum4linux, Hydra, John the Ripper, LinPEAS
**Vulnerability Explored:** Information Disclosure, Weak Credentials, SSH Key Misconfiguration

## 1\. Executive Summary

**Objective:** Conduct a black-box penetration test on the target host "Basic Pentesting" to identify vulnerabilities, gain initial access, and escalate privileges.
**Result:** The assessment identified multiple critical vulnerabilities, including an **Anonymous SMB Share** leaking sensitive information, weak SSH credentials that were easily brute-forced, and an unprotected **RSA Private Key** belonging to another user, leading to full compromise of that account.

---

## 2\. Technical Findings \& Walkthrough

### Step 1: Reconnaissance \& Enumeration

**Objective:** Identify open ports, services, and potential entry points.

**Methodology:**
I performed a service scan using **Nmap** to identify active services on the target.

```bash
nmap -sV 10.65.138.134
```

**Findings:**

Open Ports:

* 22 (SSH): OpenSSH 7.2p2.
* 80 (HTTP): Apache Web Server.
* 139/445 (SMB): Samba File Sharing.
* 8009/8080 (HTTP): Apache Tomcat.


!\[Nmap Scan Results](img/nmap\_scan.png)

**Web Enumeration:** Using Gobuster, I discovered a hidden directory `/development`.

```bash
gobuster dir -u http://10.65.138.134/ -w /usr/share/seclists/Discovery/Web-Content/common.txt
```


!\[Gobuster Discovery](img/gobuster\_development.png)

**Result:** The `/development` directory contained two notes: `dev.txt` and `j.txt`.

**Information Leak:** The notes revealed two potential usernames: ("-J", "-K") and mentioned weak password policies.

### Step 2: SMB Enumeration

**Objective:** Investigate the Samba file shares for sensitive data.

**Methodology:** I used `Enum4linux` to enumerate shares and users.

```bash
enum4linux -a 10.65.138.134
```

**Findings:**

* Users Identified: `kay`, `jan`.
* Share Identified: `/Anonymous` (Accessible without a password).


!\[Enum4linux Output](img/enum4linux\_share\_output.png)

!\[Enum4linux Output](img/enum4linux\_users\_output.png)

**Data Exfiltration:** I connected via `smbclient` and downloaded `staff.txt`.

**Content:** "PLEASE do not upload non-work-related items... (This means you too, Jan!)" - confirming Jan is a valid target.

### Step 3: Initial Access (SSH Brute Force)

**Vulnerability:** Weak Credentials
**Severity:** High

**Methodology:** Knowing the username `jan` exists, I attempted to brute-force the SSH login using Hydra.

```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.65.138.134
```

**Result:**

* Password Found: `armando`.


!\[Hydra Success](img/hydra\_success.png)

**Access:** Successfully logged in as `jan`.

### Step 4: Privilege Escalation

**Vulnerability:** Insecure File Permissions / SSH Key Leak
**Severity:** Critical

**Methodology:** After logging in as `jan`, I ran LinPEAS to enumerate the system for privilege escalation vectors.

**Findings:**

* I discovered that the `/home/kay/.ssh` directory was readable by `jan`.
* Inside, I found Kay's private SSH key (`id\_rsa`).

```bash
cat /home/kay/.ssh/id\_rsa
```

**Exploitation:**

1. **Exfiltration:** I copied the private key content to my attack machine and saved it as `rsa\_kay\_key`.
2. **Permissions:** Secured the key file: `chmod 600 rsa\_kay\_key`.
3. **Cracking the Key:** The key was passphrase-protected. I used John the Ripper to crack it.

```bash
ssh2john rsa\_kay\_key > toJohn.txt
john toJohn.txt --wordlist=/usr/share/wordlists/rockyou.txt
```

* **Passphrase Found:** `beeswax`.


!\[John the Ripper Crack](img/john\_cracked\_key.png)

4. **Lateral Movement:** I logged in as Kay using the cracked key.

```bash
ssh -i rsa\_kay\_key kay@10.65.138.134
```

**Final Loot:** I located the final flag/password in Kay's home directory.

* **File:** `pass.bak`
* **Content:** `heresareallystrongpasswordthatfollowsthepasswordpolicy$$`.


!\[Final Flag](img/final\_flag.png)

## 3\. Remediation \& Recommendations

1. **Secure SSH Keys (Critical)**

   * The user `jan` had read access to `kay's` private SSH key.
   * **Action:** Correct file permissions (`chmod 600`) on all `.ssh` directories and private keys so only the owner can read them.

2. **Disable Anonymous SMB (Medium)**

   * The SMB share allowed anonymous access and leaked internal usernames.
   * **Action:** Restrict SMB access to authenticated users only.

3. **Enforce Strong Passwords (High)**

   * The user `jan` had a weak password (`armando`) that was easily brute-forced.
   * **Action:** Implement a strict password policy requiring complexity and length.



---



*Disclaimer: This project was performed on the TryHackMe "Basic Pentesting" room for educational purposes.*

